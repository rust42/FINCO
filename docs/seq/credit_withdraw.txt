title Credit Card Charge Sequence

actor Client

CreditCardApplication->framework:1.startFinco
activate framework
CreditCardApplication<--framework:
deactivate framework

CreditCardApplication->CardFrm:2.<<new>>
activate CardFrm

CreditCardApplication<--CardFrm:
deactivate CardFrm
space 

participant GenericJTableModel

CreditCardApplication->CardFrm:3.setvisible
activate CardFrm
CreditCardApplication<--CardFrm:
deactivate CardFrm




Client->CardFrm:4.JButtonWithdraw_actionPerformed
activate CardFrm

CardFrm->GenericJDialog_Withdraw:5.<<new>>
activate GenericJDialog_Withdraw
CardFrm<--GenericJDialog_Withdraw:
deactivate GenericJDialog_Withdraw

CardFrm->GenericJDialog_Withdraw:6.show
activate GenericJDialog_Withdraw
CardFrm<--GenericJDialog_Withdraw:
Client<--CardFrm:

deactivate GenericJDialog_Withdraw
deactivate CardFrm


Client->CardFrm:input withdraw amount
activate CardFrm


CardFrm->CardFrm:7.getAmountWithdraw
activate CardFrm
space 
deactivate CardFrm

participant CreditAccTableModelResponse



CardFrm->CreditFrmController:8.charge
activate CreditFrmController
CreditFrmController->AbstractAccountService:9.withdrawMoney
activate AbstractAccountService


AbstractAccountService->AbstractStorageService:10.getIAccountByUniqueId
activate AbstractStorageService

AbstractAccountService<--AbstractStorageService:CCAccount
deactivate AbstractStorageService


AbstractAccountService->CCAccount:11.setBalance
activate CCAccount
AbstractAccountService<--CCAccount:
deactivate CCAccount

AbstractAccountService->Entry:12.<<new>>
activate Entry
AbstractAccountService<--Entry:
deactivate Entry

AbstractAccountService->CCAccount:13.addEntry
activate CCAccount
AbstractAccountService<--CCAccount:
deactivate CCAccount


AbstractAccountService->AbstractStorageService:14.update
activate AbstractStorageService
AbstractAccountService<-AbstractStorageService:
deactivate AbstractStorageService


AbstractAccountService->CCAccount:15.notifyPartyOnTxEntry
activate CCAccount
AbstractAccountService<--CCAccount:
CreditFrmController<--AbstractAccountService:

deactivate CCAccount



deactivate AbstractAccountService


CreditFrmController->CreditAccTableModelResponse:16.<<new>>
activate CreditAccTableModelResponse

CreditFrmController<--CreditAccTableModelResponse:
deactivate CreditAccTableModelResponse

CreditFrmController->CreditAccTableModelResponse:17.setAmount
activate CreditAccTableModelResponse

CreditFrmController<--CreditAccTableModelResponse:
deactivate CreditAccTableModelResponse


CardFrm<--CreditFrmController:
deactivate CreditFrmController
CardFrm->GenericJTableModel:update
activate GenericJTableModel
CardFrm<--GenericJTableModel:
deactivate GenericJTableModel
Client<--CardFrm:


deactivate CardFrm


